(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{459:function(t,e,n){},460:function(t,e,n){},562:function(t,e,n){"use strict";n(459)},563:function(t,e,n){"use strict";n(460)},645:function(t,e,n){"use strict";n.r(e);n(20),n(44);var r,o=n(10),c=n(9),l=(n(421),n(87),n(422)),d=n.n(l),f=(n(423),n(424)),m=n.n(f),h=(n(406),n(407)),v=n.n(h),w=(n(408),n(409)),_=n.n(w),y=(n(36),n(11),n(27),n(71),n(62),n(24),n(72),n(166),n(164),n(17)),D=n(115),x=n(397),C={layout:"DashboardLayout",middleware:["isAuthenticated","checkAdmin"],components:(r={BasePagination:x.a,RouteBreadCrumb:D.a},Object(c.a)(r,_.a.name,_.a),Object(c.a)(r,v.a.name,v.a),Object(c.a)(r,m.a.name,m.a),Object(c.a)(r,d.a.name,d.a),Object(c.a)(r,"Modal",x.d),r),computed:{queriedData:function(){var t=this;if(!this.searchQuery)return this.pagination.total=this.tableData.length,this.pagedData;var e=this.tableData.filter((function(e){var n=!1;return e.name.toLowerCase().includes(t.searchQuery.toLowerCase())&&(n=!0),n}));return this.pagination.total=e.length,e.slice(this.from,this.to)},to:function(){var t=this.from+this.pagination.perPage;return this.total<t&&(t=this.total),t},from:function(){return this.pagination.perPage*(this.pagination.currentPage-1)},total:function(){return this.pagination.total=this.tableData.length,this.tableData.length}},data:function(){return{pagination:{perPage:10,currentPage:1,perPageOptions:[10],total:0},propsToSearch:["name"],searchQuery:"",searchedData:[],fuseSearch:null,tableColumns:[{prop:"date",label:"Date",minWidth:200,sortable:!0},{prop:"sentby_name",label:"Doctor",minWidth:200,sortable:!0},{prop:"type",label:"Record",minWidth:200,sortable:!0},{prop:"patientID",label:"patientID",minWidth:200,sortable:!0},{prop:"treatmentID",label:"Treatment ID",minWidth:200,sortable:!0}],tableData:[],selectedRows:[],keys:0,currentPage:1}},methods:{_back:function(){this.$router.replace("/")},getData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,y.a.collection("comments").getFullList({sort:"-created",filter:'sent_to.id ?= "'.concat(y.a.authStore.model.id,'" && isRead=false')});case 3:return n.tableData=e.sent,e.next=6,y.a.collection("comments").subscribe("*",(function(t){t.record.sent_to.includes(y.a.authStore.model.id)&&0==t.record.isRead&&n.reflx(t)}));case 6:case"end":return e.stop()}}),e)})))()},reflx:function(t){var e=this,n=e.tableData;e.tableData=[];var r=n.findIndex((function(a){return a.id==t.record.id}));if(e.keys++,-1!=r&&"update"==t.action)n=n.filter((function(a){return a.id!=t.record.id}));else{if("create"==t.action){var o=t.record;n.unshift(o)}"delete"==t.action&&(n=n.filter((function(a){return a.id!=t.record.id})))}e.tableData=n},_view:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.collection("userCollection").getFirstListItem('patientID="'.concat(t.patientID,'"'));case 2:r=n.sent,o="/Comments/Detail/".concat(t.type_id,"?name=").concat(r.firstName," ").concat(r.lastName,"&pid=").concat(t.patientID,"&tid=").concat(t.treatmentID,"&nm=").concat(t.type,"&rid=").concat(t.id),window.open(e.$router.resolve(o).href,"_blank");case 5:case"end":return n.stop()}}),n)})))()},_showFirst20:function(text){var t=(new DOMParser).parseFromString(text,"text/html").body.innerText.split(" "),e=t.slice(0,15).join(" ");return e.split(" ").length<t.length&&(e+=" ..."),e}},mounted:function(){this.getData()}},k=(n(562),n(563),n(7)),component=Object(k.a)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("base-header",{staticClass:"pb-6"},[e("div",{staticClass:"row align-items-center py-1"},[e("div",{staticClass:"col-lg-12 d-flex"},[e("button",{staticClass:"btn btn-sm btm-primary",attrs:{type:"button"},on:{click:function(e){return t._back()}}},[e("i",{staticClass:"fa fa-arrow-left text-white",staticStyle:{"font-size":"19px"}})]),t._v(" "),e("h6",{staticClass:"h2 text-white mt-1"},[t._v("Doctor's Comments")])])])]),t._v(" "),e("div",{key:t.keys,staticClass:"container-fluid mt--5"},[e("div",[e("card",{staticClass:"no-border-card",attrs:{"body-classes":"px-0 pb-1","footer-classes":"pb-2"}},[e("div",[e("div",{staticClass:"col-12 d-flex justify-content-center justify-content-sm-between flex-wrap mb-2"},[e("el-select",{staticClass:"select-primary pagination-select col-md-2 mt-1",attrs:{placeholder:"Per page"},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}},t._l(t.pagination.perPageOptions,(function(t){return e("el-option",{key:t,staticClass:"select-primary",attrs:{label:t,value:t}})})),1)],1),t._v(" "),e("el-table",{attrs:{data:t.tableData,"row-key":"id","header-row-class-name":"thead-light"}},[t._l(t.tableColumns,(function(n){return e("el-table-column",t._b({key:n.label},"el-table-column",n,!1))})),t._v(" "),e("el-table-column",{attrs:{"min-width":"180px",align:"right",label:"Comments"},scopedSlots:t._u([{key:"default",fn:function(n){n.$index;var r=n.row;return e("div",{staticClass:"d-flex"},[t._v("\n                "+t._s(t._showFirst20(r.comment))+"\n              ")])}}])}),t._v(" "),e("el-table-column",{attrs:{"min-width":"180px",align:"right",label:"Action"},scopedSlots:t._u([{key:"default",fn:function(n){n.$index;var r=n.row;return e("div",{staticClass:"d-flex"},[e("base-button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"success",size:"sm",icon:""},nativeOn:{click:function(e){return t._view(r)}}},[t._v("\n                  View\n                ")])],1)}}])})],2)],1),t._v(" "),e("div",{staticClass:"col-12 d-flex justify-content-center justify-content-sm-between flex-wrap",attrs:{slot:"footer"},slot:"footer"},[e("div",{},[e("p",{staticClass:"card-category"},[t._v("\n              Showing "+t._s(t.from+1)+" to "+t._s(t.to)+" of "+t._s(t.total)+" entries\n\n              "),t.selectedRows.length?e("span",[t._v("\n                    "+t._s(t.selectedRows.length)+" rows selected\n              ")]):t._e()])]),t._v(" "),e("base-pagination",{staticClass:"pagination-no-border",attrs:{"per-page":t.pagination.perPage,total:t.total},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)])],1)])],1)}),[],!1,null,"2b3f3a42",null);e.default=component.exports}}]);